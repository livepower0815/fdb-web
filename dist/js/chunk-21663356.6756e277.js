(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21663356"],{"1d89":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"relative",float:"left"}},["password"===t.pt?s("img",{staticStyle:{position:"absolute",right:"12px",top:"13px",width:"auto",height:"7px",padding:"3px 0"},attrs:{src:a("54e1"),alt:"colse-eye"},on:{click:t.togglePwd}}):t._e(),"text"===t.pt?s("i",{staticClass:"el-icon-view",staticStyle:{position:"absolute",right:"12px",top:"13px"},on:{click:t.togglePwd}}):t._e()])},r=[],o={name:"PasswordIcon",props:{pwdType:{type:String,default:"password"}},computed:{pt:{get:function(){return this.pwdType},set:function(t){this.$emit("update:pwdType",t)}}},methods:{togglePwd:function(){this.pt="password"===this.pt?"text":"password"}}},n=o,i=a("2877"),c=Object(i["a"])(n,s,r,!1,null,null,null);e["a"]=c.exports},"205d":function(t,e,a){},"54e1":function(t,e,a){t.exports=a.p+"img/close-eye.22e04588.svg"},aa5e:function(t,e,a){"use strict";a("205d")},ede4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-bg"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"login-main-block",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)"}},[s("div",{staticClass:"main"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"username"}}),s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",name:"password"}}),s("div",{staticClass:"title"},[t._v("會員登入")]),s("div",{staticClass:"login-main"},[s("div",{staticClass:"title"},[t._v("電子郵箱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.account,expression:"formData.account"}],staticClass:"input",attrs:{type:"text",placeholder:"example@mail.com",autocomplete:"off"},domProps:{value:t.formData.account},on:{input:function(e){e.target.composing||t.$set(t.formData,"account",e.target.value)}}})]),s("div",{staticClass:"login-main"},[s("div",{staticClass:"title"},[t._v("密碼")]),"checkbox"===t.passwordType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{placeholder:"數入6位數以上，含英數字",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(t.formData.password)?t._i(t.formData.password,null)>-1:t.formData.password},on:{change:function(e){var a=t.formData.password,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=t._i(a,o);s.checked?n<0&&t.$set(t.formData,"password",a.concat([o])):n>-1&&t.$set(t.formData,"password",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.formData,"password",r)}}}):"radio"===t.passwordType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{placeholder:"數入6位數以上，含英數字",autocomplete:"off",type:"radio"},domProps:{checked:t._q(t.formData.password,null)},on:{change:function(e){return t.$set(t.formData,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{placeholder:"數入6位數以上，含英數字",autocomplete:"off",type:t.passwordType},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),s("PasswordIcon",{attrs:{"pwd-type":t.passwordType},on:{"update:pwdType":function(e){t.passwordType=e},"update:pwd-type":function(e){t.passwordType=e}}})],1),s("div",{staticClass:"login-main"},[s("div",{staticClass:"title"},[t._v("圖形驗證碼："+t._s(t.captchaCode))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.captchaCode,expression:"formData.captchaCode"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.formData.captchaCode},on:{input:function(e){e.target.composing||t.$set(t.formData,"captchaCode",e.target.value)}}})]),s("div",{staticClass:"login-main flex-center"},[s("span",{staticClass:"text-link",on:{click:function(e){return t.$router.push("/reset-password")}}},[t._v("忘記密碼，請重設密碼")])]),s("a",{staticClass:"login-main-btn",attrs:{href:"javascript:void(0)"},on:{click:t.doLogin}},[t._v("登入")]),s("div",{staticClass:"login-main-tips"},[t._v("還沒創建過帳戶？請 "),s("span",{staticClass:"text-link",on:{click:function(e){return t.$router.push("/register")}}},[t._v("註冊")])])])]),s("div",{staticClass:"login-kv-block"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}},[s("img",{attrs:{src:a("e36b"),alt:"logo"}})])],1)])},r=[],o=a("1da1"),n=(a("d3b7"),a("96cf"),a("1602")),i=a("1d89"),c={name:"Login",components:{PasswordIcon:i["a"]},data:function(){return{isLoading:!1,passwordType:"password",formData:{account:"",password:"",captchaCode:""},captchaCode:""}},mounted:function(){this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["a"])();case 3:a=e.sent,t.captchaCode=a.code,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},doLogin:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.validate();case 4:return a={account:t.formData.account,password:t.formData.password,captchaCode:t.formData.captchaCode},e.next=7,t.$store.dispatch("user/login",a);case 7:t.$message.success("登入成功"),t.$router.push({name:"Home"}),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),e.t0.isHttpError?t.$message.error(null===(s=e.t0.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.resultMsg):t.$message.error(e.t0.message),console.error(e.t0);case 15:t.isLoading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},validate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(/\S+@\S+.\S+/.test(t.formData.account)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("電子郵件：格式錯誤")));case 2:if(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(t.formData.password)){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("密碼：6位數以上，含英數字，不含特殊符號")));case 4:return e.abrupt("return","done");case 5:case"end":return e.stop()}}),e)})))()}}},p=c,d=(a("aa5e"),a("2877")),l=Object(d["a"])(p,s,r,!1,null,"15e41100",null);e["default"]=l.exports}}]);